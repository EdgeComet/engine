# EdgeComet Edge Gateway - Minimal Configuration
# Essential parameters only. See configs/full/ for complete reference.

server:
  listen: ":10070"
  timeout: 120s

redis:
  addr: "localhost:6379"
  password: ""
  db: 0

storage:
  base_path: "cache/"
  compression: snappy

render:
  cache:
    ttl: 1h

  events:
    wait_for: "networkIdle"
    additional_wait: 1s

  dimensions:
    mobile:
      id: 1
      width: 375
      height: 812
      render_ua: "Mozilla/5.0 (Linux; Android 13) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.230 Mobile Safari/537.36"
      match_ua:
        - $SearchBots
        - $AIBots
        - $Socials
        - "*DuckDuckBot*"
        - "*Baiduspider*"

  blocked_resource_types:
    - "Image"
    - "Media"
    - "Font"

bypass:
  timeout: 30s
  user_agent: "Mozilla/5.0 (compatible; EdgeComet/1.0)"

log:
  level: "info"
  console:
    enabled: true
    format: "console"

# Access log (uncomment to enable)
# event_logging:
#   file:
#     enabled: true
#     path: "/var/log/edgecomet/access.log"
#     template: "{timestamp}\t{host}\t{url}\t{status_code}\t{source}\t{serve_time}\t{user_agent}"
#     rotation:
#       max_size: 100
#       max_age: 30

# client_ip:
#   headers:
#     - "X-Real-IP"
#     - "X-Forwarded-For"

metrics:
  enabled: true
  listen: ":10079"

hosts:
  include: "hosts.d/"
